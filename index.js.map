{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\n\nconst API_KEY = \"47015635-abc1d6fc17d6df7da0f15a0aa\";\nconst API_URL = \"https://pixabay.com/api/\";\n\nexport async function getData(inputValue, page = 1, per_page = 15) {\n    try {\n        const { data } = await axios.get(API_URL, {\n            params: {\n                key: API_KEY,\n                q: inputValue,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page,\n            }\n        });\n        console.log(data);\n\n        if (data.hits.length === 0) {\n            return { hits: [] };\n        }\n        return data;\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            title: 'Сталася помилка при отриманні зображень.',\n            message: 'Спробуйте ще раз!',\n            position: 'topRight'\n        });\n        return { hits: [] };;\n    }\n}","export const list = document.querySelector(\".list\");\n\nexport function formResults(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n            </a>\n            <div class=\"info\">\n                <p class=\"info-text\"><b class=\"xz\">Likes:</b> ${likes}</p>\n                <p class=\"info-text\"><b class=\"xz\">Views:</b> ${views}</p>\n                <p class=\"info-text\"><b class=\"xz\">Comments:</b> ${comments}</p>\n                <p class=\"info-text\"><b class=\"xz\">Downloads:</b> ${downloads}</p>\n            </div>\n        </div>\n    `).join(\"\");\n    list.insertAdjacentHTML(\"beforeend\", markup);\n}","import { getData } from \"./js/pixabay-api\";\nimport { formResults, list } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector(\".search-form\");\nconst inputText = document.querySelector(\".search-form input\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\");\nlet lightbox;\nlet page = 1;\nlet totalHits = 0;\nlet loadedHits = 0;\nlet query = \"\";\n\nloadMore.style.display = \"none\";\n\nsearchForm.addEventListener(\"submit\", handleForm);\nloadMore.addEventListener(\"click\", loadMoreImg);\n\nasync function handleForm(event) {\n    event.preventDefault();\n\n    const inputValue = inputText.value.trim();\n    list.innerHTML = \"\";\n\n    if (inputValue === \"\") {\n        return iziToast.info({\n            position: 'topRight',\n            title: 'Помилка',\n            message: 'Заповніть поле запиту',\n        });\n    }\n\n    loadMore.style.display = \"none\";\n    query = inputValue;\n    page = 1;\n    totalHits = 0;\n    loadedHits = 0;\n    list.innerHTML = \"\";\n\n    showLoader();\n    await loadData(query, page);\n    hideLoader();\n    searchForm.reset();\n}\n\nasync function loadData(query, page) {\n    try {\n        const data = await getData(query, page);\n\n        if (data.hits.length === 0) {\n            loadMore.style.display = \"none\";\n            iziToast.info({\n                message: 'По вашому запиту нічого не знайдено!',\n                position: 'topRight'\n            });\n            return;\n        }\n\n        totalHits = data.totalHits;\n        loadedHits += data.hits.length;\n\n        formResults(data.hits);\n        setupLightbox();\n\n        if (page > 1) {\n            scrollPage();\n        }\n        showLoadMoreBtn();\n\n    } catch (error) {\n        iziToast.error({\n            position: \"topLeft\",\n            message: \"Упс...помилка\"\n        });\n    }\n}\n\nasync function loadMoreImg() {\n    page++;\n    loadMore.disabled = true;\n    showLoader();\n    await loadData(query, page);\n    hideLoader();\n}\n\nfunction showLoader() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n    loader.style.display = \"none\";\n}\n\nfunction showLoadMoreBtn() {\n    if (loadedHits >= totalHits) {\n        loadMore.style.display = \"none\";\n        iziToast.error({\n            message: \"Закінчились результати пошуку.\",\n            position: 'topRight',\n        });\n    } else {\n        loadMore.style.display = \"block\";\n        loadMore.disabled = false;\n    }\n}\n\nfunction setupLightbox() {\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        lightbox = new SimpleLightbox('.gallery-item a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    }\n}\n\nfunction scrollPage() {\n    const galleryItem = document.querySelector(\".gallery-item\");\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            top: height * 2,\n            behavior: \"smooth\"\n        });\n    }\n}"],"names":["API_KEY","API_URL","getData","inputValue","page","per_page","data","axios","error","iziToast","list","formResults","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","inputText","loader","loadMore","lightbox","totalHits","loadedHits","query","handleForm","loadMoreImg","event","showLoader","loadData","hideLoader","setupLightbox","scrollPage","showLoadMoreBtn","SimpleLightbox","galleryItem","height"],"mappings":"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"}